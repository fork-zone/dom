<section>
<h2 id="historical">Historical</h2>
<p>This section outlines *notable* changes between Working Drafts. A complete history of revisions for this version is available in the <a href="https://github.com/w3c/dom/commits/dom4.1">W3C DOM 4.1 repository</a>.

<h3 id="historical-changes-wd2">Changes between this draft and the <a href="https://www.w3.org/TR/2017/WD-dom41-20170420/">2nd Working Draft of DOM 4.1</a></h3>

<ul>
  <li><a href="https://github.com/w3c/dom/commit/64e26b88607b4b49e2c0b9d1207e88569e4a85a5">Use a single concept for attribute change steps of Element</a></li>
  <li><a href="https://github.com/w3c/dom/commit/271987a0246b7b3ff89067b28cb5405d7bdcaec2">Updates to Event</a><ul>
  <li>Add <code>EventListernerOptions</code>/<code>AddEventListenerOptions</code>, and make some changes to the steps of dispatching events</li>
  <li>Import realm from ES standard to ensure security</li>
  <li>Add <code>legacyOutputDidListenersThrowFlag</code> for IDB</li>
  <li>Add <code>Event</code>'s <code>cancelBubble</code> attribute</li>
  <li>Add the "activation behavior" algorithm for <code>EventTarget</code>, for synthetic click events</li>
  </ul>
  </li>
  <li><a href="https://github.com/w3c/dom/commit/f21beacd2fe64f5070b4fa86446122d4fc45eafd">Changes to Sets</a><ul>
  <li>Define token set for <code>DOMTokenList</code></li>
  <li>Make <code>DOMTokenList</code>'s <code>contains()</code> not throw</li>
  <li>Merge <code>DOMSettableTokenList</code> into <code>DOMTokenList</code></li>
  <li>Always update a <code>DOMTokenList</code> when invoking <code>toggle()</code> (later reversed in <a href="https://github.com/w3c/dom/commit/77186b541f93c8eb7ead2ef25c7ad32273812c83"><code style="text-decoration: none; border-bottom: 1px dotted #c6cbd1;">77186b5</code></a>)</li>
  <li>Define <code>replace()</code> for <code>DOMTokenList</code></li>
  <li>Define <code>supports()</code> for <code>DOMTokenList</code></li>
  </ul>
  </li>
  <li><a href="https://github.com/w3c/dom/commit/bba06789b41fd55b0f0ae016035beead2a5068d4">Add append()/prepend() to ParentNode</a></li>
  <li><a href="https://github.com/w3c/dom/commit/d00874005cb8ccd8c692ff4e0d743d3b507e9b3e">Throw an error if the event constructor isn’t exposed</a></li>
  <li><a href="https://github.com/w3c/dom/commit/47f92af56e0891e075eab36c9d0b1839c8255a27">Throw an <code>HierarchyRequestError</code> if range’s start node is node</a></li>
  <li><a href="https://github.com/w3c/dom/commit/5fcf4553d0e551c4e0c7cdf83b24a4d4bdd44199">Add createAttribute()/createAttributeNS() to Document</a></li>
  <li><a href="https://github.com/w3c/dom/commit/9f2cb403e26e41a68829581298f81ae6d7a639a3">Apply pre-removing steps to mutation algorithms and NodeIterator</a></li>
  <li><a href="https://github.com/w3c/dom/commit/e96a1d9c34137e6c4bbb957724df6e46bb1f4df1">Define replaceWith(), after(), before() for ChildNode</a></li>
  <li><a href="https://github.com/w3c/dom/commit/bea38dada944be8c4ed47c263220ed445153d87c">Calculate the length of CharacterData in the Node level</a></li>
  <li><a href="https://github.com/w3c/dom/commit/b4a0a8a9ecf223f17931a47bc22572f202437952">Use the declaration of web compability to prevent being exposed in NonElementParentNode and NonDocumentTypeChildNode</a></li>
  <li><a href="https://github.com/w3c/dom/commit/59dd9014ef318cb5f8b9ab12bd8dad8997e43b80">Define <code>hasAttributes()</code> for Element</a></li>
  <li><a href="https://github.com/w3c/dom/commit/87a356f2dacbdbdf3c39745f61f597a0415a8af8">Bring CDATASection to Node/Traversal</a></li>
  <li><a href="https://github.com/w3c/dom/commit/09b8ac958eb3fd360a83d20ad86faf2931c788d4">Clarify the replace operation of ordered set</a></li>
  <li><a href="https://github.com/w3c/dom/commit/02cb08674b44660056575c07ed61c4fa09291088">Define get/setAttributeNode, get/setAttributeNodeNS, and removeAttributeNode for Element</a></li>
  <li><a href="https://github.com/w3c/dom/commit/181d2a300490e7391164f28f6266f19241e3be3c">Define closest(), matches() and webkitMatchesSelector() for Element</a></li>
  <li><a href="https://github.com/w3c/dom/commit/f39a74823121ae7d310235e4ce1c9036cd898c5d">Clean up the unsupported events in the createEvent interface</a></li>
  <li><a href="https://github.com/w3c/dom/commit/21948b572ca6767fe628893b123907d4b1779fdb">Improve the insertion/removing steps for descendants</a></li>
  <li><a href="https://github.com/w3c/dom/commit/f2dee6ec1adcad5c2a9bb1c49f95b1a7c96af5f3">Use previousSibling in the replacing a node algorithm</a></li>
  <li><a href="https://github.com/w3c/dom/commit/f2dee6ec1adcad5c2a9bb1c49f95b1a7c96af5f3">Update the HTMLCollection algorithm in node</a></li>
  <li><a href="https://github.com/w3c/dom/commit/65c0a42894bbb175f4a71959689bc73d3a35a29e">Introduce firing an event</a><ul>
    <li>Use the relevant realm of the event target when firing an event</li>
    <li>Also note the difference between firing and dispatching an event</li>
    </ul>
  </li>
  <li><a href="https://github.com/w3c/dom/commit/f08095f95bfc1db9f23a0ab684338d0644222c08">Change add/removeEventListener for service worker</a></li>
  <li><a href="https://github.com/w3c/dom/commit/5fee45e711dc2309abc8b53f1220c732b909646e">Make Event's timeStamp use DOMHighResTimeStamp</a></li>
  <li><a href="https://github.com/w3c/dom/commit/c1c5d4a41f481b8d7c364a1a10054d935feafd8a">Add [Exposed=Window] to MutationObserver and DOMTokenList</a></li>
  <li><a href="https://github.com/w3c/dom/commit/a2e98f88d9c6253074b66927a2cd72fd7fb0f96c">Return the result of traversing</a></li>
  <li><a href="https://github.com/w3c/dom/commit/fcd248e63a2b399b21ca00fffaa94206cd74a059">Add support for custom elements</a><ul>
    <li>This is the first part of upstreaming custom elements into the DOM and
        HTML Standards, instead of having them be in a separate spec that is
        essentially a bunch of monkeypatches. The second part will be
        upstreaming the remaining portions into HTML.</li>
    </ul>
  </li>
  <li>Add Shadow DOM support:<ul>
      <li><a href="https://github.com/w3c/dom/commit/757f604d75e81bf98b0d80743fae21aa393ab8c9">Modification in section Nodes</a></li>
      <li><a href="https://github.com/w3c/dom/commit/4f4dca9e84bab6332f7a6c52b4196d69354f58eb">Modification in section Events</a></li>
      </ul>
  </li>
  <li><a href="https://github.com/w3c/dom/commit/1b2803a2b2ee664bc5be23987951e94eca213d56">Clear event's target when dispatch ends at a shadow root</a></li>
  <li><a href="https://github.com/w3c/dom/commit/77186b541f93c8eb7ead2ef25c7ad32273812c83">Integrate changes against DOMTokenList</a><ul>
    <li><code>DOMTokenList</code> should not add empty attributes</li>
    <li>The update steps are not always run for toggle and replace methods for web compatibility.</li>
    </ul>
  </li>
  <li><a href="https://github.com/w3c/dom/commit/60127de64bdc2aed9fc1dd84e0aa0efa8ff69ead">Set the stage for preventing double custom element constructor calls</a></li>
  <li><a href="https://github.com/w3c/dom/commit/11ff0ea6627637f0efe4429bbb663abf6ae825c3">dispatch event with optional legacyOutputDidListenersThrowFlag</a></li>
  <li><a href="https://github.com/w3c/dom/commit/2f1ba2e51e169d0b0d97b5dbc34c4b4d5db3a0a7">Define special dispatch behavior for click events</a></li>
  <li><a href="https://github.com/w3c/dom/commit/2a11cd1b4c74c076d024aabf0b5283c01dabc4a0">Shadow: define the slot IDL attribute on Element</a></li>
  <li><a href="https://github.com/w3c/dom/commit/b55c6f5e43caa16c7b790d7c3a082600d1ece700">Changes to "create an element"</a><ul>
      <li>swap prefix, localName arguments of create an element to make
      description consistent;</li>
      <li>change the namespace to match implementations</li>
      <li>createElement add a case when context object is HTML document</li>
      <li>mark elements in browsing-context-less documents as "undefined";</li>
      <li>clarify that the namespace check in "create an element" is redundant</li>
      <li>change createElement to report exceptions instead of rethrowing</li>
    </ul>
  </li>
  <li><a href="https://github.com/w3c/dom/commit/7d40f67406f66ff3616a8e53b37be1515d10aa1d">Add <code>[CEReactions]</code> annotations to mutating methods</a></li>

</ul>

<h3 id="historical-changes-wd2-fpwd">Changes between the <a href="https://www.w3.org/TR/2017/WD-dom41-20170420/">2nd Working Draft of DOM 4.1</a> and the <a href="https://www.w3.org/TR/2017/WD-dom41-20170321/">First Public Working Draft of DOM 4.1</a>.</h3>

<ul>
 <li><a href="https://github.com/w3c/dom/commit/7be726731a84dedb1ded94647f7e10c83e4ba6b7">Add
   <code>insertAdjacentElement()</code> and <code>insertAdjacentText()</code> methods</a></li>
 <li><a href="https://github.com/w3c/dom/commit/b805c03b4a70c400dde052dc6461c0bcda2966a5">Add
   event types from other specifications to createEvent()</a></li>
 <li><a href="https://github.com/w3c/dom/commit/e7db2549d0ab5378ac74daaca5a9c16390b464d6">Remove
   <code>XMLDocument.prototype.load</code></a>
   <ul><li>This is not implemented widely and has long been deprecated</li></ul></li>
 <li><a href="https://github.com/w3c/dom/commit/281b5ae90accaa93304b1938cf254430691525d6">Set
   a document's content-type for createDocument based on namespace</a></li>
 <li><a href="https://github.com/w3c/dom/commit/08c82ac31169f149e2779ecc2a78b55c0f06eb9e">Add
   getters and setters</a></li>
 <li><a href="https://github.com/w3c/dom/commit/c9410eac91a48183e066ff94ededc537dbb68867">Add
   <code>NamedNodeMap</code></a></li>
 <li><a href="https://github.com/w3c/dom/commit/7f175df0dd5741446761aa9419711ebdedf5a6db">Queue
   a mutation record after all operations</a></li>
 <li><a href="https://github.com/w3c/dom/commit/0bff94f552f69866c7cdeecfef2d6928920a0918">Improve
   node replacement specification</a>
   <ul><li>Do not record removal when a node is replaced by itself…</li></ul>
 </li>
 <li><a href="https://github.com/w3c/dom/commit/1ca4cf0cec4ff6f8564c88bed6642b179e3c1b4b">Refine
   adopting a node for a document.</a>
   <ul>
     <li>Only do it if <code>document</code> changes, and</li>
     <li>Apply recursively to dependents</li>
   </ul>
</li>
<li><a href="https://github.com/w3c/dom/commit/41e708c42a7fb56eb07a8523a29b06cc49eae415">Make
  <code>attr</code> inherit from node</a>
   <ul><li>(again)</li></ul>
  </li>
</ul>


<h3 id="historical-changes-fpwd-dom4">Changes between the <a href="https://www.w3.org/TR/2017/WD-dom41-20170321/">First Public Working Draft of DOM 4.1</a> and the <a href="http://www.w3.org/TR/2015/REC-dom-20151119/">DOM 4 Recommendation</a></h3>

<ul>
<li><a href="https://github.com/w3c/dom/commit/01f4c51e1eab23d5e7812995ef496a02f8d90a06">Use “is” for comparisons</a></li>
<li><a href="https://github.com/w3c/dom/commit/397eada03e09c7a5d7b27378c7f11d831d797172">Add <code>.NodeName</code> for interface Attr</a>
 <ul><li><code>.nodeName</code> is still being used. It's an alias of .name attribute.</li></ul>
</li>
<li><a href="https://github.com/w3c/dom/commit/25afbdea45e0b3bbd6dda61bd7b2f867fb1dea44">Update the IDL for the Node interface;</a>
 <ul><li>The attributes related to base URL are not optional and should be type of USVString instead of DOMString.
  Use the normalized name by following the HTML spec.</li></ul>
</li>
<li><a href="https://github.com/w3c/dom/commit/707c94714df9a74e9ccc9e17b5a12b897a92fe79">Update the description for the HTMLCollection interface</a></li>
<li><a href="https://github.com/w3c/dom/commit/26e6a3b1bd8563e0371ed3786cca233110393816">Add two clarifications for "Mutation observers"</a></li>
<li><a href="https://github.com/w3c/dom/commit/03c6378748ab9d2307752b81766020890e2a1ba5">Clarify the <code>isTrusted</code> attribute;</a>
 <ul><li>Add a note for <code>Event.isTrusted</code> to clarify that mouse click event generated by a user is trusted
  though historically its <code>isTrusted</code> attribute is initialized to <code>false</code></li></ul>
</li>
<li><a href="https://github.com/w3c/dom/commit/b6a58b36f5702969beaa3786156288f24da37173">Update the steps for <code>qualifiedName()</code> method and the way to validate a qualifiedName.</a>
 <ul><li>Add Qualified name definition for Element and Attr.
  There are several attribute related methods of Interface Element to use name instead of qualified name.
  Moreover, combine and refine some duplicated functions into one procedure, like 'get an attribute by name',
  'remove an attribute by name', etc.</li></ul>
</li>
<li><a href="https://github.com/w3c/dom/commit/bc1b3cad6e02154a7f3923915a067b4ee3c6e10f">Update the algorithm of the <code>nodeType</code> attribute.</a>
 <ul><li>Cleanup <code>nodeType</code> and <code>nodeName</code> getter attribute's description. Also change <code>nodeType</code>'s list style to be similar to <code>nodeName</code></li></ul>
</li>
<li><a href="https://github.com/w3c/dom/commit/e6560c08c20228ecbf70682cbee3276dc0fb3d40">Always queue mutation records after mutations</a>
 <ul><li>Queuing of mutation records looks inconsistent. To replace a child with node within a parent,
  the mutation record should be queued after the removal of <code>child</code> and insertion of <code>node</code></li></ul>
</li>
<li><a href="https://github.com/w3c/dom/commit/eb8190173bd1a174b651872708b708395fea5ef3">Remove the <code>unenumable</code> keyword</a>
 <ul><li>For compatibility with <cite>WEBIDL</cite> [[!WEBIDL]]</li></ul>
</li>
 </ul>

<h3 id="historical-DOM-spec-history">DOM Specification History</h3>
The W3C produced the first Working Draft of a "Document Object Model Specification" in October 1997, and a year later a version 1.0 Recommendation.

Between 2000 and 2003 a set of Recommendations collectively forming DOM 2.0 was published, and in 2004 a set of DOM 3.0 Recommendations were published.

The Element Traversal Recommendation was published in 2008, and the Selectors API Recommendation was published in February 2013. The UI Events specification, and its predecessors, have been in development since around 2000.

Other DOM specifications have been in development during that time, and continue to be developed.

Around 2009 some employees of Opera software began to write a new version of a DOM specification, which was then worked on by the "Web Hypertext Application Technology Working Group", and subsequently developed jointly with the W3C. The eventual goals of that works were described <a href="https://www.w3.org/TR/2015/REC-dom-20151119/#goals">in the DOM 4 Recommendation</a>. In November 2013 W3C produced a W3C First Public Working draft based on that work, and after subsequent development that became the W3C Recommendation <cite>DOM 4</cite>, in November 2015.

The current DOM 4.1 revision is produced by W3C, with the primary aim of documenting what is interoperably implemented and is, or is likely to become, a core part of the Web Platform. An important secondary goal is to minimise incompatibility with the ongoing work at WHATWG.

</section>
